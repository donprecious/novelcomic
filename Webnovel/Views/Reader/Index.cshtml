@using Webnovel.Repository

@{
    Layout = "~/Views/Shared/_UserLayout.cshtml";
}


<div class="row">
    <div class="col-12">
        <div class="card">

            <!-- ============================================================== -->
            <!-- Info Box -->
            <!-- ============================================================== -->
            <div class="card-body border-top">
                <div class="row mb-0">
                    <!-- col -->
                    <div class="col-lg-6 col-md-6">
                        <div class="d-flex align-items-center">
                            <div class="mr-2"><span class="text-orange display-5"><i class="mdi mdi-wallet"></i></span></div>
                            <div>
                                <span>Cowries Balance</span>
                                <h3 class="font-medium mb-0">0.0</h3>
                            </div>
                        </div>
                    </div>
                    <!-- col -->
                    <!-- col -->
                    <!-- col -->
                    <!-- col -->
                    <!-- col -->
                    <!-- col -->
                    <div class="col-lg-6 col-md-6">
                        <div class="d-flex align-items-center">
                            <div class="mr-2"><span class="text-primary display-5"><i class="mdi mdi-currency-usd"></i></span></div>
                            <div>
                                <span>Subscription Balance</span>
                                <h3 class="font-medium mb-0">0.00</h3>
                            </div>
                        </div>
                    </div>
                    <!-- col -->
                </div>
            </div>
        </div>
    </div>
</div>

<h4 class="card-title">Library</h4>
<div class="row">
    <div class="col-sm-6 col-md-6">
        <div class="card border-bottom border-info">
            <div class="card-body">
                <a href="@Url.Action("Library", "Novel")">
                    <div class="d-flex no-block align-items-center">
                        <div>
                            <h2>@ViewBag.novelLibCount</h2>
                            <h6 class="text-info">Novels</h6>
                        </div>
                        <div class="ml-auto">
                            <span class="text-info display-6"><i class="ti-book"></i></span>
                        </div>
                    </div>
                </a>
         
            </div>
        </div>
    </div>
    <div class="col-md-6 col-sm-6">
        <div class="card border-bottom border-cyan">
            <div class="card-body">
                <a href="@Url.Action("Library", "Comic")">
                    <div class="d-flex no-block align-items-center">
                        <div>
                            <h2>@ViewBag.comicLibCount</h2>
                            <h6 class="text-cyan">Comic</h6>
                        </div>
                        <div class="ml-auto">
                            <span class="text-cyan display-6"><i class="ti-book"></i></span>
                        </div>
                    </div>
                </a>
            
            </div>
        </div>
    </div>

</div>

<h4 class="card-title">Current Books</h4>

<div class="row">
    <!-- Column -->
    <div class="col-sm-6 col-md-6">
        <div class="card">
            <div class="card-body">
                <div class="d-flex flex-row">
                    <div class="round align-self-center round-success"><i class="ti-wallet"></i></div>
                    <div class="m-l-10 align-self-center">
                        <h4 class="m-b-0">Book Title</h4>
                        <span class="text-muted">Last Opened: 2nd march, 2019</span>
                    </div>
                    <div class="ml-auto align-self-center">
                        <h2 class="font-medium m-b-0">8/10</h2>
                        <h4 class="m-b-0"> <small class="badge badge-pill badge-primary">comic</small> </h4>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-sm-6 col-md-6">
        <div class="card">
            <div class="card-body">
                <div class="d-flex flex-row">
                    <div class="round align-self-center round-success"><i class="ti-wallet"></i></div>
                    <div class="m-l-10 align-self-center">
                        <h4 class="m-b-0">Book Title</h4>
                        <span class="text-muted">Last Opened: 2nd march, 2019</span>
                    </div>
                    <div class="ml-auto align-self-center">
                        <h2 class="font-medium">8/10</h2>
                        <h3 class="m-b-0"> <small class="badge badge-pill badge-primary">comic</small> </h3>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<h4 class="card-title">History</h4>
<div class="table-responsive">
    <table id="zero_config" class="table table-striped table-bordered">
        <thead>
        <tr>
            <th>Progress</th>
            <th>Title</th>
            <th>Last Opened</th>
            <th>Action</th>
                
        </tr>
        </thead>
        <tbody id="historyTable">
      
        </tbody>
        <tfoot>
        <tr>
            <th>Progress</th>
            <th>Title</th>
            <th>Last Opened</th>
            <th>Action</th>
        </tr>
        </tfoot>
    </table>
    @*<ul class="pagination float-right">
        <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1">Previous</a>
        </li>
        <li class="page-item active"><a class="page-link" href="#">1</a></li>
        <li class="page-item">
            <a class="page-link" href="#">2 <span class="sr-only">(current)</span></a>
        </li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item">
            <a class="page-link" href="#">Next</a>
        </li>
    </ul>*@
</div>

@section Scripts
{
    <script>
        $.ajax("/Reader/GetContentHistory/",
            {
                type: 'Get',
                success: function(data) {
                    console.log(data);
                    var html = '';
                    for (var i of data) {
                        var d = `   <tr>
            <td><span class="label label-warning">${i.progress}</span> &nbsp; <span class="label label-primary">${
                            i.contentType}</span></td>
            <td><a href="#" class="font-medium link">${i.title}</a></td>
            <td><a class="font-bold link">${i.lastOpened}  </a></td>
            <td><a href="#" class="btn-primary btn">Continue Reading</a></td>
              
        </tr>`;
                        html += d;
                    }
                    $("#historyTable").append(html);
                }

            });
    </script>
}
